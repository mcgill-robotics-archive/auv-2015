<launch>
    <arg name="CAMERA_YAML_FILE" />
    <arg name="CAMERA_NAME" />
    <arg name="CAMERA_ID" />

    <arg name="hd" value="1"/>   
    <arg name="viewFeed" value="0"/>
    <arg name="vivi_Filter" value="1"/>

  <group ns="$(arg CAMERA_NAME)" >
    <node pkg="camera1394" type="camera1394_node" name="camera1394_node" >
      <param name="camera_info_url" value="$(arg CAMERA_YAML_FILE)" />
      <param name="guid" value="$(arg CAMERA_ID)" />
      <param name="video_mode" value="format7_mode0" />
      <param name="frame_id" value="unibrain" />

      <!-- The White Balance is set to manual here -->
      <param name="auto_white_balance" value="3" />
      <param name="white_balance_BU" value="1000" />
      <param name="white_balance_RV" value="500" />
      <param name="bayer_pattern" value="gbrg" />
      <param name="format7_color_coding" value="raw8"/>
    </node>

    <!-- Launches the node that will rectify the image based on the calibration .yaml file. -->
    <node ns="camera" pkg="image_proc" type="image_proc" name="image_proc" if="$(arg hd)"/>

    <!-- Launches the image viewer if the parameter 'viewFeed' is set to 1 -->
    <group if="$(arg viewFeed)">
      <node pkg="computer_vision" type="imshow" name="imshow" args="/$(arg CAMERA_NAME)/camera/image_rect_color" output="screen"/>
    </group>

    <!-- Launches a series of FILTERS and outputs the feed -->
    <group if="$(arg vivi_Filter)">
      <node pkg="computer_vision" type="filters" name="filters" args="/$(arg CAMERA_NAME)/camera/image_rect_color 1 2 3 4 5 6 7" output="screen"/>
    </group>


    
  </group>

</launch>
